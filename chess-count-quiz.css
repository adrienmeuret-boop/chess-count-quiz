:root{
  /* Echiquier maximisé pour 1920x1200 avec marge */
  --page-pad: 24px;
  --gap: 28px;
  --board-size: clamp(560px, 72vmin, 880px);

  /* Colonnes d’alignement pour le formulaire (flèches / input / feedback) */
  --label-w: 130px;
  --btn-w: 40px;
  --input-w: 56px;
  --fb-w: 22px;
}

/* ===== Page ===== */
body{
  margin: 0;
  padding: var(--page-pad);
}

/* Layout global : gauche = échiquier ; droite = bloc info + bloc rouge ; bas = réponses (turquoise) */
.container{
  display: grid;
  grid-template-columns: var(--board-size) minmax(520px, 1fr);
  grid-template-areas:
    "board right"
    "answers answers";
  column-gap: var(--gap);
  row-gap: 18px;
  align-items: start;
}

/* Sans toucher à ton HTML : les enfants de .board-col deviennent des “items” de la grille */
.board-col{ display: contents; }

/* Echiquier */
#board{
  grid-area: board;
  width: var(--board-size);
  height: var(--board-size);
  display: flow-root;
}

/* Colonne droite = score/time/form + le “cadre rouge” (boutons + legend + liens) */
.info{
  grid-area: right;
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-self: start;
}

/* On force le bloc boutons/legend/liens à passer dans la colonne droite */
#boardHighlightsControls,
.legend,
#highlight-controls,
#showMovesButton{
  grid-area: right;
}

/* ===== Bloc rouge : boutons (6) ===== */
#boardHighlightsControls{
  margin-top: 10px;
  width: min(520px, 100%);
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

#boardHighlightsControls button{
  padding: 10px 12px;
  cursor: pointer;
}

/* Legend / liens : sous les boutons, dans la colonne droite */
.legend{
  width: min(520px, 100%);
  margin: 0;
}

.legend-title{
  font-weight: 600;
  margin: 12px 0 8px;
}

.legend-grid{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px 14px;
  align-items: center;
}

.legend-item{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  min-height: 22px;
}
.legend-label{ font-size: 14px; }

.legend-swatch{
  width: 18px;
  height: 18px;
  display: inline-block;
  position: relative;
  box-sizing: border-box;
  box-shadow: inset 0 0 0 2px var(--pm-border);
}
.legend-swatch::after{
  content: "";
  position: absolute;
  inset: 0;
  background-image: repeating-linear-gradient(
    45deg,
    var(--pm-fill),
    var(--pm-fill) 4px,
    transparent 4px,
    transparent 8px
  );
}

.legend-swatch.piece-p { --pm-border: rgba(255, 200, 40, 0.95); --pm-fill: rgba(255, 200, 40, 0.35); }
.legend-swatch.piece-n { --pm-border: rgba(255, 140, 0, 0.95);  --pm-fill: rgba(255, 140, 0, 0.35); }
.legend-swatch.piece-b { --pm-border: rgba(210, 50, 50, 0.95);  --pm-fill: rgba(210, 50, 50, 0.35); }
.legend-swatch.piece-r { --pm-border: rgba(40, 110, 255, 0.95); --pm-fill: rgba(40, 110, 255, 0.35); }
.legend-swatch.piece-q { --pm-border: rgba(0, 170, 210, 0.95);  --pm-fill: rgba(0, 170, 210, 0.35); }
.legend-swatch.piece-k { --pm-border: rgba(0, 170, 90, 0.95);   --pm-fill: rgba(0, 170, 90, 0.35); }
.legend-swatch.side-w  { --pm-border: rgba(180,180,180,0.95); --pm-fill: rgba(180,180,180,0.30); }
.legend-swatch.side-b  { --pm-border: rgba(0,0,0,0.75);     --pm-fill: rgba(0,0,0,0.20); }

.legend-note{
  margin-top: 10px;
  font-size: 12px;
  opacity: 0.75;
}

/* ===== Score / time ===== */
#score { font-size: 2em; }
#timer { font-size: 1.2em; }

#remainingMoves{
  font-family: monospace;
  margin: 8px 0 0;
  padding: 6px 8px;
  border-radius: 4px;
  font-size: 0.95em;
}

/* ===== Formulaire : aligner flèches + input (traits rouges) ===== */
form#chessCountForm label{ display: block; }

.input-group{
  display: grid;
  grid-template-columns: var(--label-w) var(--btn-w) var(--input-w) var(--btn-w) var(--fb-w) 90px;
  align-items: center;
  column-gap: 10px;
  margin-bottom: 10px;
}

/* Labels sur 2 lignes (via \n en JS) */
.input-group > label{
  white-space: pre-line;
  line-height: 1.05;
}

form#chessCountForm input[type="number"]{
  width: var(--input-w);
  text-align: center;
  font-size: 16px;
  padding: 4px 6px;
  box-sizing: border-box;
}

/* Flèches */
.increment, .decrement{
  background-color: #f0f0f0;
  border: 1px solid #ccc;
  padding: 6px 0;
  font-size: 22px;
  cursor: pointer;
  line-height: 1;
}

/* Feedback icon */
.feedbackIcon{
  width: var(--fb-w);
  text-align: center;
  font-size: 18px;
  font-weight: 700;
}
.correct{ color: green; }
.incorrect{ color: red; }

/* Affiche le compteur à côté des inputs */
.shownMoves{
  display: block;
  font-family: monospace;
  text-align: right;
}

/* Boutons d’action */
.action-button{
  width: 150px;
  padding: 6px 10px;
  font-size: 16px;
  background-color: #f0f0f0;
  border: 1px solid #ccc;
  cursor: pointer;
  color: black;
}
.action-button:disabled{
  background-color: #d3d3d3;
  cursor: not-allowed;
}

/* ===== Panneau réponses en bas (cadre turquoise) ===== */
#answersPanel{
  grid-area: answers;
  margin-top: 10px;
  padding: 14px 12px;
  border: 2px solid rgba(0, 190, 190, 0.9);
  border-radius: 6px;
  width: 100%;
  box-sizing: border-box;
  display: none; /* affiché seulement quand on “Show Moves” */
}

.answers-row{
  display: grid;
  grid-template-columns: var(--label-w) 70px 1fr; /* label, count bold, moves list */
  column-gap: 18px;
  align-items: start;
  padding: 6px 0;
}

.answers-label{
  white-space: pre-line;
  font-family: monospace;
  line-height: 1.05;
}

.answers-count{
  font-family: monospace;
  font-size: 20px;
  font-weight: 800; /* chiffres en gras */
  text-align: right; /* alignement propre */
}

.answers-moves{
  font-family: monospace;
  font-size: 16px;
  line-height: 1.25;
}

/* Remove native spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button{
  -webkit-appearance: none;
  margin: 0;
}
input[type="number"]{ -moz-appearance: textfield; }

#movesList{
  margin-top: 12px;
  font-family: monospace;
  display: none; /* apparait seulement après Show Moves */
  max-width: 100%;
}

.movesRow{
  display: grid;
  grid-template-columns: 130px 1fr; /* label | liste */
  column-gap: 14px;
  padding: 6px 0;
  align-items: start;
}

.movesLabel{
  white-space: pre-line; /* pour le \n => 2 lignes */
  line-height: 1.05;
}

.movesText{
  line-height: 1.25;
}

/* ===== Settings modal (restaure le comportement “fermé au chargement”) ===== */
.modal{
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0; top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.4);
}
.modal-content{
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}
.close-button{
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}
.close-button:hover,
.close-button:focus{
  color: black;
  text-decoration: none;
  cursor: pointer;
}

/* Liste des coups sous Clear */
#movesList{
  grid-area: right;          /* reste dans la colonne droite */
  width: min(900px, 100%);
  margin-top: 12px;
  font-family: monospace;
  display: none;             /* visible seulement après Show Moves */
}

.movesRow{
  display: grid;
  grid-template-columns: var(--label-w) 1fr; /* label | liste */
  column-gap: 14px;
  padding: 6px 0;
  align-items: start;
}

.movesLabel{
  white-space: pre-line; /* \n => 2 lignes */
  line-height: 1.05;
}

.movesText{
  line-height: 1.25;
}

/* ============================
   ETAPE 1 : déplacer les boutons highlight à droite
   + légende dessous
   ============================ */

/* 1) Le layout principal en 2 colonnes : échiquier à gauche, panneau à droite */
.container{
  display: grid;
  grid-template-columns: 840px 1fr; /* ajuste si besoin, l’échiquier prendra la place gauche */
  column-gap: 28px;
  align-items: start;
}

/* 2) Colonne gauche : uniquement l’échiquier */
#board{
  width: 840px;              /* ajuste plus tard, là on stabilise */
  height: 840px;
}

/* 3) Les boutons passent dans la colonne droite */
#boardHighlightsControls{
  /* on les met à droite, sous la zone info */
  margin-top: 12px;
  width: 520px;
  max-width: 100%;

  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;

  /* IMPORTANT : évite tout chevauchement */
  position: relative;
  z-index: 1;
}

/* Les boutons prennent toute la largeur de leur cellule */
#boardHighlightsControls .action-button{
  width: 100%;
}

/* 4) La légende sous les boutons, colonne droite */
#pieceLegend{
  margin-top: 12px;
  width: 520px;
  max-width: 100%;

  position: relative;
  z-index: 1;
}

/* 5) IMPORTANT : comme #boardHighlightsControls et #pieceLegend sont dans .board-col (colonne gauche),
      on les "retire" du flux gauche et on les place à droite via une astuce :
      - on force .board-col à ne pas “contenir” visuellement ces blocs
      - on les aligne sur la droite en leur donnant une marge gauche auto
*/
#boardHighlightsControls,
#pieceLegend{
  margin-left: auto;
}
